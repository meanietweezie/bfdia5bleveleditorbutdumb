const { SlashCommandBuilder,EmbedBuilder,Embed,MessageFlags,ButtonBuilder,ButtonStyle,ActionRowBuilder} = require('discord.js');
const path = require("node:path");
const fs = require("node:fs");
let parentPath = String(__dirname).slice(0,String(__dirname).lastIndexOf("src")+3)
let levelPath = path.join(parentPath,"/leveldatafold")
let strig = '## NOTE: While not reflected in parts of the actual level string or 5b code, all values are 1-indexed rather than 0-indexed (for example, to change a tile in the first row and column, use 1 for each instead of 0, or to change an aspect about the 3rd character, put in 3 instead of 2).\n## Info Commands\n### /stats-... - Shows statistics on server actions starting from when the bot was added to the server. Applies across any level loaded with the bot\n**...leaderboard** - Globally displays a leaderboard ordered by how much someone has used the bot, with an option to be tailored to specific statistics. By default, all specific changes will be reflected (for example, adding a tile array of 3x3 adds nine to the tiles statistic, and changing three properties of a character will add three to the character statistic). Toggling on "onlycommands" will limit this to only how much each command was ran. Leaderboard self-deletes after about 30 seconds.\n**...view** - Globally displays an embed of all stats of the server, or a specific user if specified. Message with embed self-deletes after about 30 seconds.\n### Miscellaneous\n**/cooldowns-view** - Shows the specific cooldowns set to a user or server based on the command ran.\n**/help** - i mean do i really\n## Level Commands (/level-...)\n### ...add-... - Adds a new thing to the level. Using these commands successfully will result in a user cooldown that prevents them from adding new things to the level.\n**...tile** - Adds a new tile to the level in the spot given and based on the emoji put in. All supported emojis are in the spreadsheet linked.\n**...tilerect** - Adds an array of up to 5 by 5 tiles to the level in the spot given and based on the emoji put in. All supported emojis are in the spreadsheet linked.\n**...roworcolumn** - Inserts a new row or column into the level, copying the contents of the one present and shifting the rest over.\n### ...set-... - Sets a specific part of a level. Using these commands successfully will result in a server cooldown that prevents everyone in the server from changing that value. \n**...bg** - Displays a background of choice based on the ID given (up to 12). Also allows to set the viewed background as the one for the level.\n**...name** - Changes the name of the level. All keyboard characters are supported, but most non-keyboard characters are removed if inputted.\n**...deaths** - Changes the necessary deaths of a level (but who gaf).\n### Miscellaneous\n**...viewandcopy** - Privately displays the current level. tilex and tiley can be used to specify a specific top-left corner; otherwise, the command set it to the very first tile. ## Char Commands (/char-...)\n**...view** Displays a list of every character in the level, as well as their properties.\n**...edit** Edits the properties of a character, whether it be a new one ("new" subcommand) or existing ("existing" subcommand).\n**...delete** Deletes a character and all of its associated dialogue.\n### ...movement-... - Changes the movement data of a specific character. These commands can only be used on characters in the "Moving" or "Deadly and Moving" state.\n**...view** Displays a list of every movement of a character in the level, as well as its distance and direction.\n**...edit** Edits the movement data of a character, whether it be adding a new movement ("new" subcommand), editing an existing one ("existing" subcommand), or deleting an existing one ("delete" subcommand).\n## Dialogue Commands (/dialogue-...)\n**...view** Displays a list of every dialogue in the level from the beginning, as well as its properties. A "View More Dialogue" button will be available if the shown dialogue is not in full due to character limits.\n**...edit** Edits the properties of a line of dialogue, whether it be a new one ("new" subcommand group) or existing ("existing" subcommand group). Dialogue can either be edited as a regular line of dialogue ("normal" subcommands) or as a lever switch event ("switchevent" subcommands).\n**...delete** Deletes any given line of dialogue, switch event or normal.\n## Miscellaneous Commands\n**/level-copybotstring** - Copies the JSON data of the level read by the bot, allowing for it to be reloaded later.\n## Manager Only Commands\nManagers are specific people or roles in the server who have access to specific commands that others cannot use.\n**/level-reset** - Sets all the tiles of the level to the same tile and allows for a new height and width to be chosen.\n**/cooldowns-edit** - Allows to change the cooldowns of any action for that server (however, whether a cooldown is user-based or server-based cannot be edited).\n**/level-loadstring...** Loads in the attached TXT string to the level. "...bot" loads in bot JSON of a level, while "...regular" loads in an HTML5b string (blue slabs included).\n## Admin Only Commands\n**/managers...** Allows to add (or remove) users and roles that have access to manager-only commands.. \n\n If you have any suggestions for things about the bot, such as better emoji replacements, dm ME! tweezie. meanietweezie. the guy who made this thing. lol'
let strigBeginning = strig.substring(0,2640)
let strigEnd = strig.substring(2640)
module.exports = {
	data: new SlashCommandBuilder()
		.setName("help")
		.setDescription("Provides context on the bot and each command."),
	async execute(interaction) {
		let helpEmbed1 = new EmbedBuilder().setTitle("Commands").setDescription(strigBeginning)
		let helpEmbed2 = new EmbedBuilder().setTitle("Commands, Cont").setDescription(strigEnd)
		let goButton = new ButtonBuilder().setLabel("Go To 5b Emoji Sheet").setURL("https://docs.google.com/spreadsheets/d/1afmWG-Z2rpXmfCtxHULGIc9ZESr83ZOKayvcVjNon6A/edit?gid=0#gid=0").setStyle(ButtonStyle.Link)
		let buttRow = new ActionRowBuilder().addComponents(goButton)
        await interaction.reply({content:"Hello! this is a Discord 5b level making bot that uses emojis to place tiles.",embeds:[helpEmbed1,helpEmbed2],flags:MessageFlags.Ephemeral,components:[buttRow]})             
	}
}